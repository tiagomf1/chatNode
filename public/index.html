<!doctype html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Teste</title>
</head>
<body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.1.3/socket.io.js"></script>
<link rel="stylesheet" href="style.css">

<form method="post" id="chat">


    <input type="text" name="username" placeholder="Digite seu nome">
    <div class="messages"></div>
    <input type="text" name="message" placeholder="Digite sua mensagem">
    <input type="submit" value="ENVIAR">
    
    
    
    
</form>

<script>
    var socket = io('http://localhost:3000');

    $('#chat').submit(function(event){
        event.preventDefault();
        var author = $('input[name=username').val();
        var message = $('input[name=message').val();

        if (author.length && message.length){
            var messageObject = {
                author: author,
                message: message
            };
            socket.emit('sendMessage',messageObject);
            renderMessage(messageObject);
            }
        });


    function renderMessage(message){
        $('.messages').append('<div class="message"><strong>' + message.author + '</strong>: '+ message.message +'</div>');
    }

    socket.on('recivedMessage',function(message){
        renderMessage(message);
    })

</script>

</body>
</html>